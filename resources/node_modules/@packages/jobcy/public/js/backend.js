(()=>{function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},a(e,t)}function e(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(e=function(){return!!a})()}!function(t){"use strict";t.ajaxSetup({headers:{"X-CSRF-TOKEN":t('meta[name="csrf-token"]').attr("content")}});var o=function(a){window.showAlert("alert-danger",a)},n=function(a){window.showAlert("alert-success",a)},r=function(a){void 0!==a.errors&&a.errors.length?i(a.errors):void 0!==a.responseJSON?void 0!==a.responseJSON.errors?422===a.status&&i(a.responseJSON.errors):void 0!==a.responseJSON.message?o(a.responseJSON.message):t.each(a.responseJSON,function(a,e){t.each(e,function(a,e){o(e)})}):o(a.statusText)},i=function(a){var e="";t.each(a,function(a,t){""!==e&&(e+="<br />"),e+=t}),o(e)};function s(a){var e=t("input[name=reviewable_id]").val(),o=t("input[name=reviewable_type]").val();t(".half-circle-spinner").toggle(),t(".spinner-overflow").toggle(),a=a||1,t.ajax({url:window.siteUrl+"/review/load-more?page=".concat(a,"&reviewable_id=").concat(e,"&reviewable_type=").concat(o),success:function(a){t(".review-list").html(a),t(".half-circle-spinner").toggle(),t(".spinner-overflow").toggle()}})}window.showAlert=function(a,e){if(a&&""!==e){var o=Math.floor(1e3*Math.random()),n='<div class="alert '.concat(a,' alert-dismissible" id="').concat(o,'">\n                            <span class="close mdi mdi-close-box" data-dismiss="alert" aria-label="close"></span>\n                            <i class="')+("alert-success"===a?"mdi mdi-check":"mdi mdi-close")+' message-icon"></i>\n                            '.concat(e,"\n                        </div>");t("#alert-container").append(n).ready(function(){window.setTimeout(function(){t("#alert-container #".concat(o)).remove()},6e3)})}},t(document).on("click",".newsletter-form button[type=submit]",function(a){a.preventDefault(),a.stopPropagation();var e=t(this);t.ajax({type:"POST",cache:!1,url:e.closest("form").prop("action"),data:new FormData(e.closest("form")[0]),contentType:!1,processData:!1,beforeSend:function(){e.addClass("button-loading")},success:function(a){a.error?o(a.message):(e.closest("form").find("input[type=email]").val(""),n(a.message))},error:function(a){r(a)},complete:function(){"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),e.removeClass("button-loading")}})}),t(document).on("click",".company-review-form button[type=submit]",function(a){a.preventDefault(),a.stopPropagation();var e=t(this);t.ajax({type:"POST",cache:!1,url:e.closest("form").prop("action"),data:new FormData(e.closest("form")[0]),contentType:!1,processData:!1,beforeSend:function(){e.addClass("button-loading")},success:function(a){a.error?o(a.message):(e.closest("form").find("textarea").val(""),n(a.message),s(t(".review-pagination").data("review-last-page")))},error:function(a){r(a)},complete:function(){"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),e.removeClass("button-loading")}})});var c=t("#applyNow");c.on("show.bs.modal",function(a){var e=t(a.relatedTarget),o=e.data("job-name"),n=e.data("job-id");c.find(".modal-job-name").text(o),c.find(".modal-job-id").val(n)}),c.on("hide.bs.modal",function(){c.find(".modal-job-name").text(""),c.find(".modal-job-id").val("")});var d=t("#applyExternalJob");d.on("show.bs.modal",function(a){var e=t(a.relatedTarget),o=e.data("job-name"),n=e.data("job-id");d.find(".modal-job-name").text(o),d.find(".modal-job-id").val(n)}),d.on("hide.bs.modal",function(){d.find(".modal-job-name").text(""),d.find(".modal-job-id").val("")}),t(function(){window.noticeMessages&&window.noticeMessages.forEach(function(a){window.showAlert("error"===a.type?"alert-danger":"alert-success",a.message)}),window.jobBoardMaps={};var i=t(".job-board-street-map");i.length&&i.each(function(a,e){!function(a){var e=a.data("uid");e||(e=(Math.random()+1).toString(36).substring(7)+(new Date).getTime(),a.data("uid",e)),jobBoardMaps[e]&&(jobBoardMaps[e].off(),jobBoardMaps[e].remove()),jobBoardMaps[e]=L.map(a[0],{zoomControl:!1,scrollWheelZoom:!0,dragging:!0,maxZoom:a.data("max-zoom")||20}).setView(a.data("center"),a.data("zoom")||14);var o=L.divIcon({className:"boxmarker",iconSize:L.point(50,20),html:a.data("map-icon")});L.tileLayer(a.data("tile-layer")?a.data("tile-layer"):"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}").addTo(jobBoardMaps[e]),L.marker(a.data("center"),{icon:o}).addTo(jobBoardMaps[e]).bindPopup(t(a.data("popup-id")).html()).openPopup()}(t(e))}),t(document).on("click",".job-bookmark-action",function(a){a.preventDefault();var e=t(a.currentTarget),i=e.closest(".job-box.card");t.ajax({type:e.prop("method")||"POST",url:e.prop("href"),data:{job_id:e.data("job-id")},beforeSend:function(){e.addClass("loading")},success:function(a){if(a.error)return o(a.message),!1;n(a.message),a.data.is_saved?i.length?i.addClass("bookmark-post"):e.closest(".favorite-icon").parent().addClass("bookmark-post"):i.length?i.removeClass("bookmark-post"):e.closest(".favorite-icon").parent().removeClass("bookmark-post")},error:function(a){401===a.status?t("#signupModal").modal("show"):r(a)},complete:function(){e.removeClass("loading")}})}),t(document).on("submit",".job-apply-form",function(a){a.preventDefault();var e=t(a.currentTarget),i=e.find("button[type=submit]");t.ajax({type:"POST",cache:!1,url:e.prop("action"),data:new FormData(e[0]),contentType:!1,processData:!1,beforeSend:function(){i.prop("disabled",!0).addClass("button-loading")},success:function(a){a.error?o(a.message):a.data&&a.data.url?(n(a.message),window.location.replace(a.data.url)):(n(a.message),setTimeout(function(){window.location.reload()},1e3))},error:function(a){r(a)},complete:function(){"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),i.prop("disabled",!1).removeClass("button-loading")}})});var s={};s.$formSearch=t("#jobs-filter-form"),s.jobListing=".jobs-listing",s.$jobListing=t(s.jobListing),s.parseParamsSearch=function(a){for(var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=a||window.location.search.substring(1),n=/([^&=]+)=?([^&]*)/g,r=/\+/g,i=function(a){return decodeURIComponent(a.replace(r," "))},s={};e=n.exec(o);){var c=i(e[1]),d=i(e[2]);"[]"==c.substring(c.length-2)?(t&&(c=c.substring(0,c.length-2)),(s[c]||(s[c]=[])).push(d)):s[c]=d}return s},s.changeInputInSearchForm=function(a){s.$formSearch.find("input, select, textarea").each(function(e,o){s.changeInputInSearchFormDetail(t(o),a)}),t(":input[form=jobs-filter-form]").each(function(e,o){s.changeInputInSearchFormDetail(t(o),a)})},s.changeInputInSearchFormDetail=function(a,e){var t=e[a.attr("name")]||null;switch(a.attr("type")){case"checkbox":case"radio":a.prop("checked",!1),Array.isArray(t)?a.prop("checked",t.includes(a.val())):a.prop("checked",!!t);break;default:a.is("[name=max_price]")?a.val(t||a.data("max")):a.is("[name=min_price]")?a.val(t||a.data("min")):a.val()!=t&&a.val(t)}},s.convertFromDataToArray=function(a){var e=[];return a.forEach(function(a){if(a.value){if(["min_price","max_price"].includes(a.name))if(s.$formSearch.find("input[name="+a.name+"]").data(a.name.substring(0,3))==parseInt(a.value))return;e.push(a)}}),e},s.jobsFilter=function(){var a=null;t(document).on("submit","#jobs-filter-form",function(e){e.preventDefault(),a&&a.abort();var n=t(e.currentTarget),i=n.serializeArray(),c=s.convertFromDataToArray(i),d=[],l=s.$jobListing.find("input[name=page]");l.val()&&c.push({name:"page",value:l.val()}),c.map(function(a){d.push(encodeURIComponent(a.name)+"="+a.value)});var u=n.attr("action");d&&d.length&&(u+="?"+d.join("&")),c.push({name:"_",value:+new Date}),a=t.ajax({url:n.data("ajax-url"),type:"GET",data:c,beforeSend:function(){s.$jobListing.find(".loading").show(),t("html, body").animate({scrollTop:s.$jobListing.offset().top-200},500)},success:function(a){var e;a.error?o(a.message||"Opp!"):(s.$jobListing.html(a.data),null!==(e=a.additional)&&void 0!==e&&e.message&&s.$jobListing.closest(".jobs-listing-container").find(".showing-of-results").html(a.additional.message),u!=window.location.href&&window.history.pushState(c,a.message,u),t(".jobs-list-map.active").map(function(a,e){s.initMaps(t(e))}))},error:function(a){"abort"!==a.statusText&&r(a)},complete:function(){s.$jobListing.find(".loading").hide()}})}),window.addEventListener("popstate",function(){var a=window.location.origin+window.location.pathname;if(s.$formSearch.length){s.$formSearch.attr("action",a);var e=s.parseParamsSearch();s.changeInputInSearchForm(e),s.$formSearch.trigger("submit")}else history.back()},!1),t(document).on("click",s.jobListing+" .pagination a",function(a){a.preventDefault();var e=t(a.currentTarget).attr("href");e.includes(window.location.protocol)||(e=window.location.protocol+e);var o=new URL(e).searchParams.get("page");s.$jobListing.find("input[name=page]").val(o),s.$formSearch.trigger("submit")})},s.jobsFilter(),t("body").on("change, click",".submit-form-filter",function(a){var e=t(a.currentTarget),o=e.closest("form");!o.length&&e.prop("form")&&(o=t(e.prop("form"))),o.length&&o.trigger("submit")}),s.interpolate=function(t,o){var n=Object.keys(o),r=Object.values(o);return function(t,o,n){if(e())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,o);var i=new(t.bind.apply(t,r));return n&&a(i,n.prototype),i}(Function,n.concat(["return `".concat(t,"`;")])).apply(void 0,r)};var c=t("#traffic-popup-map-template").html();if(s.initMaps=function(a){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a.length)return!1;var o=a.data("center")||[],n=t(".jobs-listing .job-box[data-latitude][data-longitude]"),r=n.filter(function(){return t(this).data("latitude")&&t(this).data("longitude")});r&&r.length&&(o=[r.data("latitude"),r.data("longitude")]);var i,d=a.data("uid");d||(d=(Math.random()+1).toString(36).substring(7)+(new Date).getTime(),a.data("uid",d)),window.jobBoardMaps&&window.jobBoardMaps[d]&&(e?(window.jobBoardMaps[d].off(),window.jobBoardMaps[d].remove()):(i=window.jobBoardMaps[d]).eachLayer(function(a){a.remove()}));var l=[];if(n.map(function(a,e){var o=t(e);l.push(o.data())}),!i){var u=a.data("zoom")||14;l.length||(u=a.data("zoom-empty")||12),i=L.map(a[0],{zoomControl:!0,scrollWheelZoom:!0,dragging:!0,maxZoom:18}).setView(o,u)}L.tileLayer(a.data("tile-layer")?a.data("tile-layer"):"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}").addTo(i);var p=new L.MarkerClusterGroup,m=[];l.forEach(function(a){if(a.latitude&&a.longitude){var e=L.divIcon({className:"boxmarker",iconSize:L.point(50,20),html:a.map_icon}),t=s.interpolate(c,{item:a}),o=new L.Marker(new L.LatLng(a.latitude,a.longitude),{icon:e}).bindPopup(t).addTo(i);m.push(o),p.addLayer(o),i.flyToBounds(L.latLngBounds(m.map(function(a){return a.getLatLng()})))}}),i.addLayer(p),a.addClass("active"),window.jobBoardMaps[d]=i},t(".jobs-list-sidebar").length){var d=t(".jobs-list-sidebar"),l=d.find(".jobs-list-map");d.is(":visible")&&l.length&&requestAnimationFrame(function(){s.initMaps(l)}),t(window).on("resize",function(){d.is(":visible")&&l.length&&s.initMaps(l)})}s.setCookie=function(a,e,t){var o=new Date,n=window.siteUrl;n.includes(window.location.protocol)||(n=window.location.protocol+n);var r=new URL(n);o.setTime(o.getTime()+24*t*60*60*1e3);var i="expires="+o.toUTCString();document.cookie=a+"="+e+"; "+i+"; path=/; domain="+r.hostname},t(document).on("click",".btn-toggle-map",function(){var a=t(this).hasClass("active");t(this).toggleClass("active");var e=t(".jobs-list-sidebar");if(a)e.addClass("d-lg-none");else{e.removeClass("d-lg-none");var o=e.find(".jobs-list-map");o.hasClass("active")||s.initMaps(o)}s.setCookie("show_map_on_jobs_page",a?0:1,60)}),t("#offcanvas-jobs-map").on("show.bs.offcanvas",function(a){t('[data-bs-target="#offcanvas-jobs-map"]').addClass("active");var e=t(a.currentTarget).find(".jobs-list-map");e.hasClass("active")||s.initMaps(e)}).on("hide.bs.offcanvas",function(){t('[data-bs-target="#offcanvas-jobs-map"]').removeClass("active")})}),t(document).on("click",".review-pagination a",function(a){a.preventDefault(),s(t(this).attr("href").split("page=")[1])}),t(document).on("click",".navbar .navbar-collapse > .navbar-nav .nav-item > .nav-link",function(a){a.preventDefault();var e=t(a.currentTarget);"_blank"===e.prop("target")?window.open(e.prop("href"),"_blank"):window.location.href=e.prop("href")}),t(function(){var a=t("[data-tab-type]"),e=a.first().data("ajax-url");if(e){var o=function(a,o){if("true"!==a.data("loaded")){var n=e.replace("__TYPE__",o);t.ajax({url:n,method:"GET",dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){if(a.find(".skeleton-loading").remove(),!1===e.error&&e.data&&e.data.html){var t='\n                            <div class="text-center mt-4 pt-2">\n                                <a class="btn btn-primary" href="'.concat(a.data("jobs-url"),'">\n                                    ').concat(a.data("view-more-text"),' <i class="mdi mdi mdi-arrow-right"></i>\n                                </a>\n                            </div>\n                        ');a.html(e.data.html+t),a.data("loaded","true")}},error:function(a){console.error("Error loading tab:",a)}})}};a.on("shown.bs.tab",function(a){var e=t(a.currentTarget),n=e.data("tab-type"),r=e.data("bs-target"),i=t(r);o(i,n)});var n=t("#featured-jobs");if(n.length&&"true"!==n.data("loaded")){var r=n.data("tab-type");r&&o(n,r)}}}),t(function(){var a=t(".job-categories-container");if(a.length&&"true"!==a.data("loaded")){var e=a.data("ajax-url"),o=a.data("show-jobs-count");if(!e)return;t.ajax({url:e,method:"GET",dataType:"json",data:{show_jobs_count:o},headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){a.find(".skeleton-loading").remove(),!1===e.error&&e.data&&e.data.html&&(a.html(e.data.html),a.data("loaded","true"))},error:function(a){console.error("Error loading categories:",a)}})}}),t(function(){var a=t(".featured-job-categories-container");if(a.length&&"true"!==a.data("loaded")){var e=a.data("ajax-url"),o=a.data("show-jobs-count"),n=a.data("limit");if(!e)return;t.ajax({url:e,method:"GET",dataType:"json",data:{show_jobs_count:o,limit:n},headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){a.find(".skeleton-loading").remove(),!1===e.error&&e.data&&e.data.html&&(a.html(e.data.html),a.data("loaded","true"))},error:function(a){console.error("Error loading featured categories:",a)}})}})}(jQuery)})();